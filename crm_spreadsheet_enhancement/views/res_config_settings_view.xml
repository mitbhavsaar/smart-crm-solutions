<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record id="view_res_config_settings_crm_quotation" model="ir.ui.view">
            <field name="name">res.config.settings.crm.quotation</field>
            <field name="model">res.config.settings</field>
            <field name="inherit_id" ref="crm.res_config_settings_view_form"/>
            <field name="arch" type="xml">

                <!-- Isolated block for CRM Quotation Templates -->
                <xpath expr="//app[@name='crm']/block[1]" position="after">
                    <block title="Quotation Management" id="crm_quotation_management_block">
                        <setting id="crm_quotation_template_setting" string="CRM Quotation Template" help="Enable default CRM quotation templates for opportunities.">
                            <field name="enable_crm_quotation_templates"/>
                            <label for="crm_quotation_template_id" invisible="enable_crm_quotation_templates != True" class="me-4">Default Template</label>
                            <field name="crm_quotation_template_id" invisible="enable_crm_quotation_templates != True" class="oe_inline"/>
                            <div invisible="enable_crm_quotation_templates != True">
                                <a type="action" name="crm_spreadsheet_enhancement.crm_quotation_template_action" class="oe_link">
                                    CRM Quotation Templates
                                </a>
                            </div>
                        </setting>
                    </block>
                </xpath>

            </field>
        </record>
        <record id="crm_quotation_template_action" model="ir.actions.act_window">
            <field name="name">CRM Quotation Templates</field>
            <field name="res_model">crm.quotation.template</field>
            <field name="view_mode">list,form</field>
            <field name="target">current</field>
        </record>

    </data>
</odoo>
